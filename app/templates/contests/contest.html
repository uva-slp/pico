{% extends 'contests/base.html' %}

{% load bootstrap3 %}
{% load contest_extras %}

{% block title_block %}{{ contest_data.title }} Contest{% endblock %}

{% block head_block %}
    {{ block.super }}
    <style>
        .panel-body {
            background: #F7F7F7;
            border-style: solid;
            border-width: 0.5px;
            border-color: #E5E5E5;
            border-radius: 5px;
        }
        .panel-default .panel-heading:hover {
            background: #dfdfdf;
        }
        .panel-success .panel-heading:hover {
            background: #9bc79b;
        }
        .panel-danger .panel-heading:hover {
            background: #ea9ea8;
        }
        .panel-warning .panel-heading:hover {
            background: #f7f79e;
        }
    </style>
{% endblock %}

{% block content_block %}
    <br /><br />
    <h1>Contest: {{ contest_data.title }}</h1>

    <a href="{% url 'contests:scoreboard' contest_data.id %}">View Scoreboard</a>
    <br />
    {% if is_judge %}
        {% if contest_data.contest_start == NULL %}
            <form id="activate_contest_form" method="post"
                  action="{% url 'contests:contest' contest_data.id %}">
                {% csrf_token %}
                {% bootstrap_button "Activate Contest" value="activate_contest" button_type="submit" name="submit" button_class="btn btn-primary" %}
            </form>
        {% else %}
            <h3>Contest Started at {{ contest_data.contest_start }}</h3>
        {% endif %}
        <br />
        <a href="{% url 'contests:contest_judge_submissions' contest_data.id %}">View all submissions</a>
    {% endif %}
    <br />
    {% for team in contest_teams %}
        <a href="{% url 'contests:contest_submissions' contest_data.id team.id %}">View team {{team.name}}'s submissions</a>
        <br />
    {% endfor %}
    <h3>Contest Problems:</h3>
    {% for problem in contest_problems %}
            <div class="panel panel-{{ color_states|index:forloop.counter }}">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <!-- the data-parent attribute make sure only one panel is open at a time-->
                        <div data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{ forloop.counter }}">
                            <div style="display: table; width: 100%;">
                                <div class="col-sm-4" style="display: table-cell;">
                                    Problem {{ forloop.counter }}
                                </div>
                                <div class="col-sm-4" style="display: table-cell;">
                                    Submission Attempts: {{ submission_attempts|index:forloop.counter }}
                                </div>
                                <div class="col-sm-4" style="display: table-cell;">
                                    Status: {{ submission_status|index:forloop.counter }}
                                </div>
                            </div>
                        </div>
                    </h4>
                </div>
                <div id="collapse{{ forloop.counter }}" class="panel-collapse collapse">
                    <ul class="list-group">
                        <li class="list-group-item">Description of Input
                            <div class="panel-body">
                                {{ problem.input_description }}
                            </div>
                        </li>
                        <li class="list-group-item">Description of Output
                            <div class="panel-body">
                                {{ problem.output_description }}
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div style="display: table; width: 100%;">
                                <div class="col-sm-6" style="display: table-cell;">Sample Input
                                    <div class="panel-body">
                                         <pre>{{ problem.sample_input|print_file_content }}</pre>
                                    </div>
                                </div>
                                <div class="col-sm-6" style="display: table-cell;">Sample Output
                                    <div class="panel-body">
                                         <pre>{{ problem.sample_output|print_file_content }}</pre>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div class="panel-footer">Upload your file:</div>
                </div>
            </div>
    {% endfor %}
    </div>
{% endblock %}
</html>
