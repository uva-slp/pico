{% extends 'contests/home_base.html' %}
{% load bootstrap3 %}
{% load static %}

{% block content_block %}
    <li class="navbar">
        <strong><em>Page Title</em></strong>
        <a href="{% url 'contests:create_template' %}" class="btn btn-primary"> Create a Contest Template </a>
        <a href="{% url 'contests:create' %}" class="btn btn-primary"> Create a Contest </a>
        <a href="{% url 'users:password_change' %}" class="btn btn-primary"> Change password </a>
        <a href="{% url 'users:logout' %}" class="btn btn-primary"> Logout </a>
    </li>
    
    <hr class="colorgraph">

    <div class="panel panel-default panel-table">
        <div class="panel-heading">
            <div class="row">
                <div class="col col-xs-6">
                    <h3 class="panel-title">Active Contests:</h3>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-list">
                <tbody>
                {% if contests_created %}
                    {% for contest in contests_created %}
                        {% if contest.contest_start.date <= time_now.date and contest.contest_start.time <= time_now.time %}
                        <tr>
                            <td><a href="{% url 'contests:contest' contest.id %}">{{ contest.title }}</a></td>
                        </tr>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <tr>
                        <td><em>No data available</em></td>
                    </tr>
                {% endif %}
                </tbody>
           </table>
        </div>
    </div>

    <div class="panel panel-default panel-table">
        <div class="panel-heading">
            <div class="row">
                <div class="col col-xs-6">
                    <h3 class="panel-title">Unstarted Contests:</h3>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-list">
                <tbody>
                {% if contests_created %}
                    {% for contest in contests_created %}
                        {% if contest.contest_start == NULL %}
                        <tr>
                            <td><a href="{% url 'contests:contest' contest.id %}">{{ contest.title }}</a></td>
                        </tr>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <tr>
                        <td><em>No data available</em></td>
                    </tr>
                {% endif %}
                </tbody>
           </table>
        </div>
    </div>

    <div class="panel panel-default panel-table">
        <div class="panel-heading">
            <div class="row">
                <div class="col col-xs-6">
                    <h3 class="panel-title">Past Contests:</h3>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-list">
                <tbody>
                {% if contests_created %}
                    {% for contest in contests_created %}
                        {% if contest.contest_start.date < time_now.date and contest.contest_start.time < time_now.time %}
                        <tr>
                            <td><a href="{% url 'contests:contest' contest.id %}">{{ contest.title }}</a></td>
                        </tr>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <tr>
                        <td><em>No data available</em></td>
                    </tr>
                {% endif %}
                </tbody>
           </table>
        </div>
    </div>

    <br />
    <!--
    <h3>Create team</h3>
    <br><br>

    {'% if teams_joined %'}
        <h3>You are a member of:</h3>
        <ul>
        {'% for team in teams_joined %'}
            <li>{'{ team.name }'}</li>
        {'% endfor %'}
        </ul>
    {'% else %'}
        <h3>You are not on any teams!</h3>
    {'% endif %'}-->

    <br>
    <br>
    
    <div class="container-fluid" >
        <div class="row-fluid">
            <div class="col-sm-4" style="text-align: center;">
                <button id="create-team-toggle-button">Create Team [+]</button>
                <div id="create-team-toggle-wrapper" style="text-align: center;">
                    <h3>Create team</h3>
                    
                    <form id="team_form" method="post" action="{% url 'teams:create' %}">
                        {% csrf_token %}
                        {{ team_form.as_p }}
                
                        <input type="submit" value="submit" />
                    </form>
                </div>
            </div>
            <div class="col-sm-4" style="text-align: center;">
                <button id="join-team-toggle-button">Join Team [+]</button>
                <div id="join-team-toggle-wrapper" style="text-align: center;">
                    <h3>Join team</h3>
                    
                    <form id="team_join_form" method="post" action="{% url 'teams:join' %}">
                        {% csrf_token %}
                        {{ team_join_form.as_p }}
                
                        <input type="submit" value="submit" />
                    </form>
                </div>
            </div>
            <div class="col-sm-4" style="text-align: center;">
                <button id="leave-team-toggle-button">Leave Team [+]</button>
                <div id="leave-team-toggle-wrapper" style="text-align: center;">
                    <h3>Leave team</h3>

                    <form id="team_leave_form" method="post" action="{% url 'teams:leave' %}">
                        {% csrf_token %}
                        {{ team_leave_form.as_p }}

                        <input type="submit" value="submit" />
                    </form>
                </div>  
            </div>
        </div>
    </div>

{% endblock %}

{% block foot_block %}
    {{ team_join_form.media }}
{% endblock %}
