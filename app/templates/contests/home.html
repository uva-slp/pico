{% extends 'contests/base.html' %}
{% load static %}

{% block content_block %}

    <li class="navbar">
        <a href="{% url 'users:password_change' %}">Change password</a>
        <a href="{% url 'users:logout' %}">Logout</a>
        <a href="{% url 'contests:create_template' %}">Create a Contest Template</a>
    </li>
    
    <hr class="colorgraph">

    {% if contests_created %}
        <h3>Contests Created:</h3>
        <table>  
            {% for contest in contests_created %}
                <tr>
                    <td><a href="{% url 'contests:contest' contest.id %}">{{ contest.title }}</a></td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <h3>No active contests!</h3>
    {% endif %}

    <a href="{% url 'contests:create' %}">Create a Contest</a>
    <br><br>

    {% if teams_joined %}
        <h3>You are a member of:</h3>
        <ul>
        {% for team in teams_joined %}    
            <li>{{ team.name }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <h3>You are not on any teams!</h3>
    {% endif %}

    <br>
    <br>
    
    <div class="container-fluid" >
        <div class="row-fluid">
            <div class="col-sm-4">
                <button id="create-team-toggle-button" style="margin:auto auto auto auto;">Create Team [+]</button>
                <div id="create-team-toggle-wrapper">
                    <h3 style="margin:auto auto auto auto;">Create team</h3>
                    
                    <form id="team_form" method="post" action="{% url 'teams:create' %}">
                        {% csrf_token %}
                        {{ team_form.as_p }}
                
                        <input type="submit" value="submit" />
                    </form>
                </div>
            </div>
            <div class="col-sm-4">
                <button id="join-team-toggle-button" style="margin:auto auto auto auto;">Join Team [+]</button>
                <div id="join-team-toggle-wrapper">
                    <h3 style="margin:auto auto auto auto;">Join team</h3>
                    
                    <form id="team_join_form" method="post" action="{% url 'teams:join' %}">
                        {% csrf_token %}
                        {{ team_join_form.as_p }}
                
                        <input type="submit" value="submit" />
                    </form>
                </div>
            </div>
            <div class="col-sm-4">
                <button id="leave-team-toggle-button" style="margin:auto auto auto auto;">Leave Team [+]</button>
                <div id="leave-team-toggle-wrapper">
                    <h3 style="margin:auto auto auto auto;">Leave team</h3>

                    <form id="team_leave_form" method="post" action="{% url 'teams:leave' %}">
                        {% csrf_token %}
                        {{ team_leave_form.as_p }}

                        <input type="submit" value="submit" />
                    </form>
                </div>  
            </div>
        </div>
    </div>

{% endblock %}

{% block foot_block %}
    {{ team_join_form.media }}
{% endblock %}